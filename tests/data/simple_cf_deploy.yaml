resource_types:
  - name: cf-cli
    type: docker-image
    source:
      repository: nulldriver/cf-cli-resource
      tag: latest

resources:
  - name: src
    type: git
    source:
      uri: git@github.com:eruvanos/flightplan.git
      branch: master

  - name: cf-dev
    type: cf-cli
    source:
      cf_dial_timeout: 300

jobs:

  - name: deploy-app
    public: false
    plan:

    - get: src
      resource: src
      trigger: true

    - put: deploy
      resource: cf-dev
      params:
        command: zero-downtime-push
        current_app_name: concourse
        manifest: src/ci/manifest.yml
        path: src/.